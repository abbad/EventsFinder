# this is working 
SELECT pic_big, name, venue, location, start_time, eid FROM event 
WHERE eid IN (SELECT eid FROM event_member WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me()))

# where start time 
SELECT pic_big, name, venue, location, start_time, eid FROM event 
WHERE eid IN (SELECT eid FROM event_member WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) AND start_time < 1385856000)


-----------original -------------------- 
$lat = "40";
$long = "30";

// using offset gives us a "square" on the map from where to search the events
$offset = 0.4;

$events = 'SELECT pic_big, name, venue, location, start_time, eid FROM event WHERE eid IN 
(SELECT eid FROM event_member WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) 
AND start_time > '. $created_time .' OR uid = me()) AND start_time > '. 
$created_time .' AND venue.longitude < \''. ($long+$offset) .'\' AND venue.latitude < \''. 
($lat+$offset) .'\' AND venue.longitude > \''. ($long-$offset) .'\' AND venue.latitude > \''. 
($lat-$offset) .'\' ORDER BY start_time ASC '. $limit;

----------- weird algorithm that gets you good information ---------------
SELECT name, pic_cover,start_time, end_time, location, description,venue  FROM event WHERE eid  in(SELECT eid FROM event_member WHERE uid IN (SELECT page_id FROM place WHERE distance(latitude, longitude, "52.5167", "13.3833") <= 50000)) AND start_time > 1383955200
AND name = 'berlin'

SELECT name FROM event WHERE contains('amman') AND venue.longitude > 30 AND venue.latitude > 30 AND venue.longitude < 40 AND venue.latitude < 40 AND start_time > now()


SELECT name, eid FROM event WHERE contains ('amman') AND start_time > now() AND venue.latitude > "30" AND venue.latitude < "40" AND venue.longitude > "30" AND venue.longitude < "40" 
